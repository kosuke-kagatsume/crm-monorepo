'use client';

import { useRouter } from 'next/navigation';
import { useState } from 'react';

interface MarketingDashboardProps {
  userEmail: string;
}

interface EmailTemplate {
  id: string;
  name: string;
  subject: string;
  type: 'newsletter' | 'promotion' | 'follow-up';
  openRate: number;
  clickRate: number;
  lastUsed: string;
}

interface SocialPost {
  id: string;
  platform: 'facebook' | 'instagram' | 'twitter' | 'linkedin';
  content: string;
  scheduledDate: string;
  status: 'scheduled' | 'published' | 'draft';
  engagement: number;
}

interface ABTest {
  id: string;
  name: string;
  variantA: { name: string; conversion: number; visitors: number };
  variantB: { name: string; conversion: number; visitors: number };
  winner: 'A' | 'B' | 'inconclusive';
  confidenceLevel: number;
  status: 'running' | 'completed';
}

interface LandingPageMetrics {
  pageUrl: string;
  visitors: number;
  conversions: number;
  conversionRate: number;
  bounceRate: number;
  avgTimeOnPage: string;
  topSources: string[];
}

interface CustomerJourney {
  stage: string;
  count: number;
  conversionRate: number;
  avgTimeInStage: string;
  dropOffRate: number;
}

interface Campaign {
  id: string;
  name: string;
  type: 'web' | 'seo' | 'ppc' | 'social' | 'email';
  status: 'active' | 'scheduled' | 'completed' | 'paused';
  startDate: string;
  endDate: string;
  budget: number;
  spent: number;
  leads: number;
  conversion: number;
  roi: number;
}

interface LeadSource {
  source: string;
  count: number;
  quality: number;
  conversion: number;
  trend: 'up' | 'down' | 'stable';
}

interface WebMetrics {
  visitors: number;
  pageViews: number;
  bounceRate: number;
  avgSessionDuration: string;
  conversionRate: number;
}

export default function MarketingDashboard({
  userEmail,
}: MarketingDashboardProps) {
  const router = useRouter();
  const [selectedPeriod, setSelectedPeriod] = useState<
    'day' | 'week' | 'month'
  >('week');
  const [activeModal, setActiveModal] = useState<string | null>(null);
  const [searchTerm, setSearchTerm] = useState('');
  const [selectedFilter, setSelectedFilter] = useState('all');
  const [showCampaignForm, setShowCampaignForm] = useState(false);
  const [editingCampaign, setEditingCampaign] = useState<Campaign | null>(null);

  const campaigns: Campaign[] = [
    {
      id: 'C001',
      name: 'Â§ñÂ£ÅÂ°óË£Ö„Ç≠„É£„É≥„Éö„Éº„É≥2024',
      type: 'ppc',
      status: 'active',
      startDate: '2024-01-01',
      endDate: '2024-03-31',
      budget: 500000,
      spent: 320000,
      leads: 145,
      conversion: 12.5,
      roi: 320,
    },
    {
      id: 'C002',
      name: 'SEOÂØæÁ≠ñ - Âú∞ÂüüÊúÄÈÅ©Âåñ',
      type: 'seo',
      status: 'active',
      startDate: '2024-01-15',
      endDate: '2024-12-31',
      budget: 200000,
      spent: 45000,
      leads: 89,
      conversion: 8.2,
      roi: 580,
    },
    {
      id: 'C003',
      name: 'InstagramÂ∫ÉÂëä',
      type: 'social',
      status: 'paused',
      startDate: '2024-01-10',
      endDate: '2024-02-10',
      budget: 150000,
      spent: 120000,
      leads: 67,
      conversion: 5.5,
      roi: 180,
    },
    {
      id: 'C004',
      name: '„É°„Éº„É´„Éû„Éº„Ç±„ÉÜ„Ç£„É≥„Ç∞',
      type: 'email',
      status: 'scheduled',
      startDate: '2024-02-15',
      endDate: '2024-03-15',
      budget: 50000,
      spent: 0,
      leads: 0,
      conversion: 0,
      roi: 0,
    },
  ];

  const leadSources: LeadSource[] = [
    {
      source: 'GoogleÂ∫ÉÂëä',
      count: 145,
      quality: 4.2,
      conversion: 12.5,
      trend: 'up',
    },
    {
      source: '„Ç™„Éº„Ç¨„Éã„ÉÉ„ÇØÊ§úÁ¥¢',
      count: 89,
      quality: 4.5,
      conversion: 15.2,
      trend: 'up',
    },
    {
      source: 'SNS',
      count: 67,
      quality: 3.8,
      conversion: 8.5,
      trend: 'stable',
    },
    {
      source: 'Á¥π‰ªã',
      count: 45,
      quality: 4.8,
      conversion: 35.5,
      trend: 'up',
    },
    {
      source: '„ÉÄ„Ç§„É¨„ÇØ„Éà',
      count: 32,
      quality: 4.0,
      conversion: 10.2,
      trend: 'down',
    },
  ];

  const webMetrics: WebMetrics = {
    visitors: 12450,
    pageViews: 45230,
    bounceRate: 42.5,
    avgSessionDuration: '3:24',
    conversionRate: 2.8,
  };

  const emailTemplates: EmailTemplate[] = [
    {
      id: 'ET001',
      name: 'Â§ñÂ£ÅÂ°óË£Ö„Éó„É≠„É¢„Éº„Ç∑„Éß„É≥',
      subject: 'Êò•„ÅÆÂ§ñÂ£ÅÂ°óË£Ö„Ç≠„É£„É≥„Éö„Éº„É≥ÈñãÂßãÔºÅ',
      type: 'promotion',
      openRate: 28.5,
      clickRate: 4.2,
      lastUsed: '2024-01-15',
    },
    {
      id: 'ET002',
      name: '„Éï„Ç©„É≠„Éº„Ç¢„ÉÉ„Éó„É°„Éº„É´',
      subject: '„ÅäË¶ãÁ©ç„ÇÇ„Çä„ÅÆ„ÅîÁ¢∫Ë™ç„ÅØ„ÅÑ„Åã„Åå„Åß„Åô„ÅãÔºü',
      type: 'follow-up',
      openRate: 35.8,
      clickRate: 8.1,
      lastUsed: '2024-01-20',
    },
    {
      id: 'ET003',
      name: 'ÊúàÊ¨°„Éã„É•„Éº„Çπ„É¨„Çø„Éº',
      subject: '‰ªäÊúà„ÅÆÊñΩÂ∑•‰∫ã‰æã„Çí„ÅîÁ¥π‰ªã',
      type: 'newsletter',
      openRate: 22.3,
      clickRate: 3.5,
      lastUsed: '2024-01-10',
    },
  ];

  const socialPosts: SocialPost[] = [
    {
      id: 'SP001',
      platform: 'instagram',
      content:
        'Êú¨Êó•ÂÆåÊàê„Åó„ÅüÂ§ñÂ£ÅÂ°óË£Ö„ÅÆÁèæÂ†¥ÂÜôÁúü„Åß„Åô„ÄÇ„ÅäÂÆ¢Êßò„Å´„ÇÇÂ§ßÂ§âÊ∫ÄË∂≥„ÅÑ„Åü„Å†„Åë„Åæ„Åó„ÅüÔºÅ',
      scheduledDate: '2024-02-15 10:00',
      status: 'scheduled',
      engagement: 0,
    },
    {
      id: 'SP002',
      platform: 'facebook',
      content: 'Êò•„ÅÆÂ°óË£Ö„Ç≠„É£„É≥„Éö„Éº„É≥ÂÆüÊñΩ‰∏≠ÔºÅË©≥Á¥∞„ÅØWeb„Çµ„Ç§„Éà„Çí„ÅîË¶ß„Åè„Å†„Åï„ÅÑ„ÄÇ',
      scheduledDate: '2024-02-14 09:00',
      status: 'published',
      engagement: 145,
    },
  ];

  const abTests: ABTest[] = [
    {
      id: 'ABT001',
      name: '„É©„É≥„Éá„Ç£„É≥„Ç∞„Éö„Éº„Ç∏„Éò„ÉÉ„ÉÄ„Éº',
      variantA: { name: 'ÂæìÊù•„Éá„Ç∂„Ç§„É≥', conversion: 2.8, visitors: 1250 },
      variantB: { name: 'Êñ∞„Éá„Ç∂„Ç§„É≥', conversion: 3.4, visitors: 1280 },
      winner: 'B',
      confidenceLevel: 95,
      status: 'completed',
    },
    {
      id: 'ABT002',
      name: 'CTA„Éú„Çø„É≥„ÉÜ„Ç≠„Çπ„Éà',
      variantA: { name: '„ÅäË¶ãÁ©ç„ÇÇ„Çä‰æùÈ†º', conversion: 4.1, visitors: 980 },
      variantB: { name: 'ÁÑ°ÊñôË¶ãÁ©ç„ÇÇ„Çä', conversion: 4.6, visitors: 1020 },
      winner: 'inconclusive',
      confidenceLevel: 87,
      status: 'running',
    },
  ];

  const landingPageMetrics: LandingPageMetrics[] = [
    {
      pageUrl: '/landing/exterior-painting',
      visitors: 2450,
      conversions: 89,
      conversionRate: 3.6,
      bounceRate: 38.2,
      avgTimeOnPage: '2:45',
      topSources: ['GoogleÂ∫ÉÂëä', 'FacebookÂ∫ÉÂëä', '„Ç™„Éº„Ç¨„Éã„ÉÉ„ÇØÊ§úÁ¥¢'],
    },
    {
      pageUrl: '/landing/roof-repair',
      visitors: 1820,
      conversions: 56,
      conversionRate: 3.1,
      bounceRate: 42.1,
      avgTimeOnPage: '2:12',
      topSources: ['GoogleÂ∫ÉÂëä', '„ÉÄ„Ç§„É¨„ÇØ„Éà'],
    },
  ];

  const customerJourney: CustomerJourney[] = [
    {
      stage: 'Ë™çÁü•',
      count: 5420,
      conversionRate: 18.5,
      avgTimeInStage: '3Êó•',
      dropOffRate: 81.5,
    },
    {
      stage: 'ËààÂë≥',
      count: 1003,
      conversionRate: 35.2,
      avgTimeInStage: '5Êó•',
      dropOffRate: 64.8,
    },
    {
      stage: 'Ê§úË®é',
      count: 353,
      conversionRate: 42.5,
      avgTimeInStage: '8Êó•',
      dropOffRate: 57.5,
    },
    {
      stage: 'Ë≥ºÂÖ•ÊÑèÂêë',
      count: 150,
      conversionRate: 68.7,
      avgTimeInStage: '12Êó•',
      dropOffRate: 31.3,
    },
    {
      stage: 'ÊàêÁ¥Ñ',
      count: 103,
      conversionRate: 100,
      avgTimeInStage: '-',
      dropOffRate: 0,
    },
  ];

  const getStatusColor = (status: string) => {
    switch (status) {
      case 'active':
        return 'bg-green-100 text-green-800';
      case 'scheduled':
        return 'bg-blue-100 text-blue-800';
      case 'completed':
        return 'bg-gray-100 text-gray-800';
      case 'paused':
        return 'bg-yellow-100 text-yellow-800';
      default:
        return 'bg-gray-100 text-gray-800';
    }
  };

  const getTypeIcon = (type: string) => {
    switch (type) {
      case 'web':
        return 'üåê';
      case 'seo':
        return 'üîç';
      case 'ppc':
        return 'üí∞';
      case 'social':
        return 'üì±';
      case 'email':
        return 'üìß';
      default:
        return 'üìä';
    }
  };

  const getTrendIcon = (trend: string) => {
    switch (trend) {
      case 'up':
        return '‚ÜóÔ∏è';
      case 'down':
        return '‚ÜòÔ∏è';
      default:
        return '‚Üí';
    }
  };

  const handleCampaignCreate = () => {
    setEditingCampaign(null);
    setShowCampaignForm(true);
  };

  const handleCampaignEdit = (campaign: Campaign) => {
    setEditingCampaign(campaign);
    setShowCampaignForm(true);
  };

  const handleExport = (type: string) => {
    // Simulate export functionality
    alert(`${type}„É¨„Éù„Éº„Éà„Çí„Ç®„ÇØ„Çπ„Éù„Éº„Éà„Åó„Å¶„ÅÑ„Åæ„Åô...`);
  };

  const handleMetricClick = (metric: string) => {
    setActiveModal(metric);
  };

  const filteredCampaigns = campaigns.filter((campaign) => {
    const matchesSearch = campaign.name
      .toLowerCase()
      .includes(searchTerm.toLowerCase());
    const matchesFilter =
      selectedFilter === 'all' || campaign.status === selectedFilter;
    return matchesSearch && matchesFilter;
  });

  return (
    <div className="space-y-6">
      {/* Header with Search and Filters */}
      <div className="bg-white rounded-lg shadow p-4">
        <div className="flex items-center justify-between mb-4">
          <h2 className="text-lg font-semibold">
            üìä „Éû„Éº„Ç±„ÉÜ„Ç£„É≥„Ç∞„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ
          </h2>
          <div className="flex space-x-2">
            <button
              onClick={() => handleExport('marketing')}
              className="bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700"
            >
              üìä „Ç®„ÇØ„Çπ„Éù„Éº„Éà
            </button>
            <button
              onClick={handleCampaignCreate}
              className="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700"
            >
              ‚ûï Êñ∞Ë¶è„Ç≠„É£„É≥„Éö„Éº„É≥
            </button>
          </div>
        </div>

        <div className="flex flex-wrap items-center justify-between gap-4">
          <div className="flex space-x-2">
            <button
              onClick={() => setSelectedPeriod('day')}
              className={`px-4 py-2 rounded ${selectedPeriod === 'day' ? 'bg-blue-600 text-white' : 'bg-gray-100'}`}
            >
              Êó•Ê¨°
            </button>
            <button
              onClick={() => setSelectedPeriod('week')}
              className={`px-4 py-2 rounded ${selectedPeriod === 'week' ? 'bg-blue-600 text-white' : 'bg-gray-100'}`}
            >
              ÈÄ±Ê¨°
            </button>
            <button
              onClick={() => setSelectedPeriod('month')}
              className={`px-4 py-2 rounded ${selectedPeriod === 'month' ? 'bg-blue-600 text-white' : 'bg-gray-100'}`}
            >
              ÊúàÊ¨°
            </button>
            <button
              onClick={() => router.push('/map')}
              className="bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700"
            >
              üó∫Ô∏è Âú∞Âõ≥ÂàÜÊûê
            </button>
          </div>

          <div className="flex space-x-2">
            <input
              type="text"
              placeholder="„Ç≠„É£„É≥„Éö„Éº„É≥Ê§úÁ¥¢..."
              value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
              className="px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
            />
            <select
              value={selectedFilter}
              onChange={(e) => setSelectedFilter(e.target.value)}
              className="px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
            >
              <option value="all">ÂÖ®„Å¶„ÅÆ„Çπ„ÉÜ„Éº„Çø„Çπ</option>
              <option value="active">ÂÆüÊñΩ‰∏≠</option>
              <option value="scheduled">‰∫àÂÆö</option>
              <option value="paused">‰∏ÄÊôÇÂÅúÊ≠¢</option>
              <option value="completed">ÂÆå‰∫Ü</option>
            </select>
          </div>
        </div>
      </div>

      {/* Web Metrics - Now Clickable */}
      <div className="bg-white rounded-lg shadow p-6">
        <h2 className="text-lg font-semibold mb-4">üåê Web„Çµ„Ç§„ÉàÂàÜÊûê</h2>
        <div className="grid grid-cols-2 md:grid-cols-5 gap-6">
          <div
            className="cursor-pointer hover:bg-gray-50 p-3 rounded transition"
            onClick={() => handleMetricClick('visitors')}
          >
            <p className="text-sm text-gray-600">Ë®™ÂïèËÄÖÊï∞</p>
            <p className="text-3xl font-bold text-blue-600">
              {webMetrics.visitors.toLocaleString()}
            </p>
            <p className="text-xs text-green-600">+15.2%</p>
          </div>
          <div
            className="cursor-pointer hover:bg-gray-50 p-3 rounded transition"
            onClick={() => handleMetricClick('pageviews')}
          >
            <p className="text-sm text-gray-600">„Éö„Éº„Ç∏„Éì„É•„Éº</p>
            <p className="text-3xl font-bold text-purple-600">
              {webMetrics.pageViews.toLocaleString()}
            </p>
            <p className="text-xs text-green-600">+8.5%</p>
          </div>
          <div
            className="cursor-pointer hover:bg-gray-50 p-3 rounded transition"
            onClick={() => handleMetricClick('bounce')}
          >
            <p className="text-sm text-gray-600">Áõ¥Â∏∞Áéá</p>
            <p className="text-3xl font-bold text-orange-600">
              {webMetrics.bounceRate}%
            </p>
            <p className="text-xs text-green-600">-2.3%</p>
          </div>
          <div
            className="cursor-pointer hover:bg-gray-50 p-3 rounded transition"
            onClick={() => handleMetricClick('duration')}
          >
            <p className="text-sm text-gray-600">Âπ≥ÂùáÊªûÂú®ÊôÇÈñì</p>
            <p className="text-3xl font-bold text-green-600">
              {webMetrics.avgSessionDuration}
            </p>
            <p className="text-xs text-green-600">+0:24</p>
          </div>
          <div
            className="bg-yellow-50 p-3 rounded cursor-pointer hover:bg-yellow-100 transition"
            onClick={() => handleMetricClick('conversion')}
          >
            <p className="text-sm text-yellow-800 font-medium">CVÁéá</p>
            <p className="text-3xl font-bold text-yellow-600">
              {webMetrics.conversionRate}%
            </p>
            <p className="text-xs text-green-600">+0.3%</p>
          </div>
        </div>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        {/* Active Campaigns */}
        <div className="lg:col-span-2">
          <div className="bg-white rounded-lg shadow">
            <div className="px-6 py-4 border-b bg-blue-50">
              <h2 className="text-lg font-semibold text-blue-800">
                üöÄ ÂÆüÊñΩ‰∏≠„Ç≠„É£„É≥„Éö„Éº„É≥
              </h2>
            </div>
            <div className="p-6 space-y-4">
              {filteredCampaigns.map((campaign) => (
                <div
                  key={campaign.id}
                  className="border rounded-lg p-4 hover:shadow-md transition"
                >
                  <div className="flex justify-between items-start">
                    <div className="flex-1">
                      <div className="flex items-center mb-2">
                        <span className="text-2xl mr-2">
                          {getTypeIcon(campaign.type)}
                        </span>
                        <h4 className="font-medium text-gray-900">
                          {campaign.name}
                        </h4>
                        <span
                          className={`ml-3 px-2 py-1 rounded text-xs font-medium ${getStatusColor(campaign.status)}`}
                        >
                          {campaign.status === 'active'
                            ? 'ÂÆüÊñΩ‰∏≠'
                            : campaign.status === 'scheduled'
                              ? '‰∫àÂÆö'
                              : campaign.status === 'completed'
                                ? 'ÂÆå‰∫Ü'
                                : '‰∏ÄÊôÇÂÅúÊ≠¢'}
                        </span>
                      </div>
                      <div className="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                        <div>
                          <p className="text-gray-600">‰∫àÁÆóÊ∂àÂåñ</p>
                          <p className="font-bold">
                            ¬•{campaign.spent.toLocaleString()} / ¬•
                            {campaign.budget.toLocaleString()}
                          </p>
                          <div className="mt-1 bg-gray-200 rounded-full h-2">
                            <div
                              className="bg-blue-500 h-2 rounded-full"
                              style={{
                                width: `${(campaign.spent / campaign.budget) * 100}%`,
                              }}
                            />
                          </div>
                        </div>
                        <div>
                          <p className="text-gray-600">Áç≤Âæó„É™„Éº„Éâ</p>
                          <p className="font-bold text-green-600">
                            {campaign.leads}‰ª∂
                          </p>
                        </div>
                        <div>
                          <p className="text-gray-600">„Ç≥„É≥„Éê„Éº„Ç∏„Éß„É≥Áéá</p>
                          <p className="font-bold">{campaign.conversion}%</p>
                        </div>
                        <div>
                          <p className="text-gray-600">ROI</p>
                          <p
                            className={`font-bold ${campaign.roi >= 200 ? 'text-green-600' : 'text-orange-600'}`}
                          >
                            {campaign.roi}%
                          </p>
                        </div>
                      </div>
                      <p className="text-xs text-gray-500 mt-2">
                        ÊúüÈñì: {campaign.startDate} „Äú {campaign.endDate}
                      </p>
                    </div>
                    <div className="flex space-x-2">
                      <button
                        onClick={() => handleCampaignEdit(campaign)}
                        className="bg-orange-600 text-white px-3 py-1 rounded text-sm hover:bg-orange-700"
                      >
                        Á∑®ÈõÜ
                      </button>
                      <button
                        onClick={() =>
                          handleMetricClick(`campaign-${campaign.id}`)
                        }
                        className="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700"
                      >
                        Ë©≥Á¥∞
                      </button>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </div>

          {/* Lead Sources */}
          <div className="bg-white rounded-lg shadow mt-6">
            <div className="px-6 py-4 border-b bg-green-50">
              <h2 className="text-lg font-semibold text-green-800">
                üìà „É™„Éº„ÉâÁç≤Âæó„ÇΩ„Éº„Çπ
              </h2>
            </div>
            <div className="p-6">
              <div className="overflow-x-auto">
                <table className="w-full">
                  <thead className="bg-gray-50">
                    <tr>
                      <th className="px-4 py-2 text-left text-sm font-medium text-gray-700">
                        „ÇΩ„Éº„Çπ
                      </th>
                      <th className="px-4 py-2 text-center text-sm font-medium text-gray-700">
                        „É™„Éº„ÉâÊï∞
                      </th>
                      <th className="px-4 py-2 text-center text-sm font-medium text-gray-700">
                        ÂìÅË≥™
                      </th>
                      <th className="px-4 py-2 text-center text-sm font-medium text-gray-700">
                        CVÁéá
                      </th>
                      <th className="px-4 py-2 text-center text-sm font-medium text-gray-700">
                        „Éà„É¨„É≥„Éâ
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    {leadSources.map((source, idx) => (
                      <tr key={idx} className="border-b">
                        <td className="px-4 py-3 font-medium">
                          {source.source}
                        </td>
                        <td className="px-4 py-3 text-center font-bold text-blue-600">
                          {source.count}
                        </td>
                        <td className="px-4 py-3 text-center">
                          <div className="flex items-center justify-center">
                            {'‚≠ê'.repeat(Math.floor(source.quality))}
                            <span className="ml-1 text-sm text-gray-600">
                              ({source.quality})
                            </span>
                          </div>
                        </td>
                        <td className="px-4 py-3 text-center">
                          <span
                            className={`font-bold ${source.conversion >= 15 ? 'text-green-600' : 'text-gray-600'}`}
                          >
                            {source.conversion}%
                          </span>
                        </td>
                        <td className="px-4 py-3 text-center text-lg">
                          <span
                            className={
                              source.trend === 'up'
                                ? 'text-green-600'
                                : source.trend === 'down'
                                  ? 'text-red-600'
                                  : 'text-gray-600'
                            }
                          >
                            {getTrendIcon(source.trend)}
                          </span>
                        </td>
                      </tr>
                    ))}
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          {/* Áµ±ÂêàË≤°ÂãôÂàÜÊûê„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ */}
          <div className="bg-white rounded-2xl shadow-lg mt-6 overflow-hidden">
            <div className="px-6 py-4 bg-gradient-to-r from-purple-600 to-indigo-600 text-white">
              <h3 className="font-semibold">üìä „Éû„Éº„Ç±„ÉÜ„Ç£„É≥„Ç∞ÊäïË≥áÂàÜÊûê</h3>
            </div>
            <div className="p-6">
              {/* „Éû„Éº„Ç±„ÉÜ„Ç£„É≥„Ç∞ÊåáÊ®ô */}
              <div className="grid grid-cols-2 gap-4 mb-6">
                <div className="bg-green-50 p-4 rounded-lg">
                  <h5 className="font-bold text-green-800 mb-2">üí∞ ÊäïË≥áÂäπÊûú</h5>
                  <div className="space-y-2 text-sm">
                    <div className="flex justify-between">
                      <span>„Éû„Éº„Ç±„ÉÜ„Ç£„É≥„Ç∞ROI</span>
                      <span className="font-bold">420%</span>
                    </div>
                    <div className="flex justify-between">
                      <span>È°ßÂÆ¢Áç≤ÂæóÂçò‰æ°</span>
                      <span className="font-bold">¬•8,450</span>
                    </div>
                    <div className="flex justify-between">
                      <span>È°ßÂÆ¢ÁîüÊ∂Ø‰æ°ÂÄ§</span>
                      <span className="font-bold">¬•2.8M</span>
                    </div>
                  </div>
                </div>

                <div className="bg-blue-50 p-4 rounded-lg">
                  <h5 className="font-bold text-blue-800 mb-2">üìà ÊàêÈï∑ÊåáÊ®ô</h5>
                  <div className="space-y-2 text-sm">
                    <div className="flex justify-between">
                      <span>„É™„Éº„ÉâÊàêÈï∑Áéá</span>
                      <span className="font-bold text-green-600">+24.5%</span>
                    </div>
                    <div className="flex justify-between">
                      <span>CVÁéáÊîπÂñÑ</span>
                      <span className="font-bold text-green-600">+18.2%</span>
                    </div>
                    <div className="flex justify-between">
                      <span>„Éñ„É©„É≥„ÉâË™çÁü•Â∫¶</span>
                      <span className="font-bold">32.8%</span>
                    </div>
                  </div>
                </div>
              </div>

              {/* ‰∫àÁÆóÈÖçÂàÜ„Å®ÂÆüÁ∏æ */}
              <div className="bg-yellow-50 p-4 rounded-lg mb-4">
                <h5 className="font-bold text-yellow-800 mb-2">
                  üí≥ ‰∫àÁÆóÈÖçÂàÜ„Å®ÂÆüÁ∏æ
                </h5>
                <div className="space-y-3">
                  <div>
                    <div className="flex justify-between text-sm mb-1">
                      <span>„Éá„Ç∏„Çø„É´Â∫ÉÂëä</span>
                      <span>¬•485K / ¬•500K</span>
                    </div>
                    <div className="w-full bg-yellow-200 rounded-full h-2">
                      <div
                        className="bg-yellow-600 h-2 rounded-full"
                        style={{ width: '97%' }}
                      ></div>
                    </div>
                  </div>
                  <div>
                    <div className="flex justify-between text-sm mb-1">
                      <span>„Ç≥„É≥„ÉÜ„É≥„ÉÑÂà∂‰Ωú</span>
                      <span>¬•165K / ¬•200K</span>
                    </div>
                    <div className="w-full bg-yellow-200 rounded-full h-2">
                      <div
                        className="bg-green-500 h-2 rounded-full"
                        style={{ width: '82.5%' }}
                      ></div>
                    </div>
                  </div>
                  <div>
                    <div className="flex justify-between text-sm mb-1">
                      <span>„Ç§„Éô„É≥„Éà„ÉªPR</span>
                      <span>¬•78K / ¬•150K</span>
                    </div>
                    <div className="w-full bg-yellow-200 rounded-full h-2">
                      <div
                        className="bg-blue-500 h-2 rounded-full"
                        style={{ width: '52%' }}
                      ></div>
                    </div>
                  </div>
                </div>
              </div>

              {/* „ÉÅ„É£„Éç„É´Âà•ROI */}
              <div className="bg-purple-50 p-4 rounded-lg mb-4">
                <h5 className="font-bold text-purple-800 mb-2">
                  üéØ „ÉÅ„É£„Éç„É´Âà•ROI
                </h5>
                <div className="grid grid-cols-2 gap-3 text-sm">
                  <div className="flex justify-between">
                    <span>GoogleÂ∫ÉÂëä</span>
                    <span className="font-bold text-green-600">320%</span>
                  </div>
                  <div className="flex justify-between">
                    <span>SEO</span>
                    <span className="font-bold text-green-600">580%</span>
                  </div>
                  <div className="flex justify-between">
                    <span>SNSÂ∫ÉÂëä</span>
                    <span className="font-bold text-orange-600">180%</span>
                  </div>
                  <div className="flex justify-between">
                    <span>„É°„Éº„É´</span>
                    <span className="font-bold text-blue-600">245%</span>
                  </div>
                </div>
              </div>

              {/* „ÇØ„Ç§„ÉÉ„ÇØ„Ç¢„ÇØ„Çª„Çπ */}
              <div className="grid grid-cols-3 gap-2">
                <button
                  onClick={() => router.push('/expenses')}
                  className="p-3 bg-red-50 rounded-lg hover:bg-red-100 transition text-center"
                >
                  <div className="text-xl mb-1">üí≥</div>
                  <div className="text-xs font-medium">Â∫ÉÂëäË≤ªÁî®</div>
                </button>
                <button
                  onClick={() => handleExport('roi-analysis')}
                  className="p-3 bg-orange-50 rounded-lg hover:bg-orange-100 transition text-center"
                >
                  <div className="text-xl mb-1">üìä</div>
                  <div className="text-xs font-medium">ROIÂàÜÊûê</div>
                </button>
                <button className="p-3 bg-purple-50 rounded-lg hover:bg-purple-100 transition text-center">
                  <div className="text-xl mb-1">üí°</div>
                  <div className="text-xs font-medium">‰∫àÁÆóÈÖçÂàÜ</div>
                </button>
              </div>
            </div>
          </div>
        </div>

        {/* Right Sidebar */}
        <div className="lg:col-span-1 space-y-6">
          {/* Today's Tasks */}
          <div className="bg-white rounded-lg shadow">
            <div className="px-6 py-4 border-b bg-orange-50">
              <h3 className="font-semibold text-orange-800">üìã Êú¨Êó•„ÅÆ„Çø„Çπ„ÇØ</h3>
            </div>
            <div className="p-4 space-y-3">
              <div className="flex items-start space-x-2">
                <input type="checkbox" className="mt-1" />
                <div className="flex-1">
                  <p className="text-sm font-medium">GoogleÂ∫ÉÂëä„É¨„Éù„Éº„Éà‰ΩúÊàê</p>
                  <p className="text-xs text-gray-500">10:00„Åæ„Åß</p>
                </div>
              </div>
              <div className="flex items-start space-x-2">
                <input type="checkbox" className="mt-1" />
                <div className="flex-1">
                  <p className="text-sm font-medium">SEO„Ç≠„Éº„ÉØ„Éº„ÉâÂàÜÊûê</p>
                  <p className="text-xs text-gray-500">14:00„Åæ„Åß</p>
                </div>
              </div>
              <div className="flex items-start space-x-2">
                <input type="checkbox" className="mt-1" />
                <div className="flex-1">
                  <p className="text-sm font-medium">SNSÊäïÁ®ø„Çπ„Ç±„Ç∏„É•„Éº„É´</p>
                  <p className="text-xs text-gray-500">17:00„Åæ„Åß</p>
                </div>
              </div>
            </div>
          </div>

          {/* Quick Stats */}
          <div className="bg-white rounded-lg shadow">
            <div className="px-6 py-4 border-b">
              <h3 className="font-semibold">‚ö° „ÇØ„Ç§„ÉÉ„ÇØÁµ±Ë®à</h3>
            </div>
            <div className="p-4 space-y-3">
              <div className="flex justify-between">
                <span className="text-sm text-gray-600">‰ªäÊúà„ÅÆ„É™„Éº„Éâ</span>
                <span className="font-bold text-blue-600">378‰ª∂</span>
              </div>
              <div className="flex justify-between">
                <span className="text-sm text-gray-600">ÂïÜË´áÂåñÁéá</span>
                <span className="font-bold text-green-600">24.5%</span>
              </div>
              <div className="flex justify-between">
                <span className="text-sm text-gray-600">ÊàêÁ¥ÑÁéá</span>
                <span className="font-bold text-purple-600">12.3%</span>
              </div>
              <div className="flex justify-between">
                <span className="text-sm text-gray-600">CPA</span>
                <span className="font-bold">¬•8,450</span>
              </div>
              <div className="flex justify-between">
                <span className="text-sm text-gray-600">LTV</span>
                <span className="font-bold text-orange-600">¬•2.8M</span>
              </div>
            </div>
          </div>

          {/* Email Templates */}
          <div className="bg-white rounded-lg shadow">
            <div className="px-6 py-4 border-b bg-purple-50">
              <h3 className="font-semibold text-purple-800">
                üìß „É°„Éº„É´„ÉÜ„É≥„Éó„É¨„Éº„Éà
              </h3>
            </div>
            <div className="p-4 space-y-3">
              {emailTemplates.slice(0, 3).map((template) => (
                <div
                  key={template.id}
                  className="border rounded p-3 hover:bg-gray-50 cursor-pointer"
                >
                  <div className="flex justify-between items-start mb-2">
                    <h5 className="font-medium text-sm">{template.name}</h5>
                    <span
                      className={`px-2 py-1 rounded text-xs ${
                        template.type === 'promotion'
                          ? 'bg-red-100 text-red-800'
                          : template.type === 'follow-up'
                            ? 'bg-blue-100 text-blue-800'
                            : 'bg-gray-100 text-gray-800'
                      }`}
                    >
                      {template.type === 'promotion'
                        ? '„Éó„É≠„É¢'
                        : template.type === 'follow-up'
                          ? '„Éï„Ç©„É≠„Éº'
                          : '„Éã„É•„Éº„Çπ'}
                    </span>
                  </div>
                  <p className="text-xs text-gray-600 mb-2">
                    {template.subject}
                  </p>
                  <div className="grid grid-cols-2 gap-2 text-xs">
                    <div>
                      ÈñãÂ∞ÅÁéá:{' '}
                      <span className="font-bold text-green-600">
                        {template.openRate}%
                      </span>
                    </div>
                    <div>
                      „ÇØ„É™„ÉÉ„ÇØÁéá:{' '}
                      <span className="font-bold text-blue-600">
                        {template.clickRate}%
                      </span>
                    </div>
                  </div>
                </div>
              ))}
              <button
                onClick={() => setActiveModal('email-templates')}
                className="w-full bg-purple-600 text-white py-2 rounded hover:bg-purple-700 text-sm"
              >
                üìß „ÉÜ„É≥„Éó„É¨„Éº„ÉàÁÆ°ÁêÜ
              </button>
            </div>
          </div>

          {/* Social Media Scheduler */}
          <div className="bg-white rounded-lg shadow">
            <div className="px-6 py-4 border-b bg-pink-50">
              <h3 className="font-semibold text-pink-800">
                üì± SNSÊäïÁ®ø„Çπ„Ç±„Ç∏„É•„Éº„É´
              </h3>
            </div>
            <div className="p-4 space-y-3">
              {socialPosts.map((post) => (
                <div
                  key={post.id}
                  className="border rounded p-3 hover:bg-gray-50"
                >
                  <div className="flex justify-between items-start mb-2">
                    <div className="flex items-center">
                      <span className="text-lg mr-2">
                        {post.platform === 'instagram'
                          ? 'üì∑'
                          : post.platform === 'facebook'
                            ? 'üìò'
                            : post.platform === 'twitter'
                              ? 'üê¶'
                              : 'üíº'}
                      </span>
                      <span className="text-sm font-medium capitalize">
                        {post.platform}
                      </span>
                    </div>
                    <span
                      className={`px-2 py-1 rounded text-xs ${
                        post.status === 'published'
                          ? 'bg-green-100 text-green-800'
                          : post.status === 'scheduled'
                            ? 'bg-blue-100 text-blue-800'
                            : 'bg-gray-100 text-gray-800'
                      }`}
                    >
                      {post.status === 'published'
                        ? 'ÊäïÁ®øÊ∏à„Åø'
                        : post.status === 'scheduled'
                          ? '‰∫àÂÆö'
                          : '‰∏ãÊõ∏„Åç'}
                    </span>
                  </div>
                  <p className="text-xs text-gray-600 mb-2">
                    {post.content.slice(0, 60)}...
                  </p>
                  <div className="flex justify-between text-xs">
                    <span>{post.scheduledDate}</span>
                    {post.status === 'published' && (
                      <span className="text-blue-600">
                        „Ç®„É≥„Ç≤„Éº„Ç∏: {post.engagement}
                      </span>
                    )}
                  </div>
                </div>
              ))}
              <button
                onClick={() => setActiveModal('social-scheduler')}
                className="w-full bg-pink-600 text-white py-2 rounded hover:bg-pink-700 text-sm"
              >
                üìÖ ÊäïÁ®ø„Çπ„Ç±„Ç∏„É•„Éº„É´
              </button>
            </div>
          </div>

          {/* Quick Actions */}
          <div className="bg-white rounded-lg shadow">
            <div className="px-6 py-4 border-b">
              <h3 className="font-semibold">üöÄ „ÇØ„Ç§„ÉÉ„ÇØ„Ç¢„ÇØ„Ç∑„Éß„É≥</h3>
            </div>
            <div className="p-4 space-y-2">
              <button
                onClick={() => router.push('/map')}
                className="w-full bg-purple-600 text-white py-2 rounded hover:bg-purple-700"
              >
                üó∫Ô∏è Âú∞Âõ≥ÂàÜÊûê„ÇíÈñã„Åè
              </button>
              <button
                onClick={() => setActiveModal('lead-capture-builder')}
                className="w-full bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700"
              >
                üìù „É™„Éº„ÉâÁç≤Âæó„Éï„Ç©„Éº„É†‰ΩúÊàê
              </button>
              <button
                onClick={() => handleExport('campaign-report')}
                className="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700"
              >
                üìä „Ç≠„É£„É≥„Éö„Éº„É≥„É¨„Éù„Éº„Éà
              </button>
              <button
                onClick={handleCampaignCreate}
                className="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700"
              >
                üöÄ Êñ∞Ë¶è„Ç≠„É£„É≥„Éö„Éº„É≥
              </button>
              <button
                onClick={() => setActiveModal('analytics')}
                className="w-full bg-orange-600 text-white py-2 rounded hover:bg-orange-700"
              >
                üìà Ë©≥Á¥∞„Ç¢„Éä„É™„ÉÜ„Ç£„ÇØ„Çπ
              </button>
            </div>
          </div>
        </div>
      </div>

      {/* New Marketing Features Sections */}

      {/* Landing Page Analytics */}
      <div className="bg-white rounded-lg shadow">
        <div className="px-6 py-4 border-b bg-indigo-50">
          <div className="flex justify-between items-center">
            <h2 className="text-lg font-semibold text-indigo-800">
              üè† „É©„É≥„Éá„Ç£„É≥„Ç∞„Éö„Éº„Ç∏ÂàÜÊûê
            </h2>
            <button
              onClick={() => setActiveModal('landing-analytics')}
              className="text-sm text-indigo-600 hover:text-indigo-800"
            >
              Ë©≥Á¥∞„ÇíË¶ã„Çã ‚Üí
            </button>
          </div>
        </div>
        <div className="p-6">
          <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
            {landingPageMetrics.map((page, idx) => (
              <div
                key={idx}
                className="border rounded-lg p-4 hover:shadow-md cursor-pointer transition"
                onClick={() => handleMetricClick(`landing-${idx}`)}
              >
                <h4 className="font-medium mb-3">{page.pageUrl}</h4>
                <div className="grid grid-cols-2 gap-4 text-sm">
                  <div>
                    <p className="text-gray-600">Ë®™ÂïèËÄÖ</p>
                    <p className="font-bold text-blue-600">
                      {page.visitors.toLocaleString()}
                    </p>
                  </div>
                  <div>
                    <p className="text-gray-600">„Ç≥„É≥„Éê„Éº„Ç∏„Éß„É≥</p>
                    <p className="font-bold text-green-600">
                      {page.conversions}
                    </p>
                  </div>
                  <div>
                    <p className="text-gray-600">CVÁéá</p>
                    <p className="font-bold text-purple-600">
                      {page.conversionRate}%
                    </p>
                  </div>
                  <div>
                    <p className="text-gray-600">Áõ¥Â∏∞Áéá</p>
                    <p className="font-bold text-orange-600">
                      {page.bounceRate}%
                    </p>
                  </div>
                </div>
                <div className="mt-3">
                  <p className="text-xs text-gray-600 mb-1">
                    ‰∏ªË¶Å„Éà„É©„Éï„Ç£„ÉÉ„ÇØ:
                  </p>
                  <div className="flex flex-wrap gap-1">
                    {page.topSources.slice(0, 3).map((source, i) => (
                      <span
                        key={i}
                        className="px-2 py-1 bg-gray-100 text-xs rounded"
                      >
                        {source}
                      </span>
                    ))}
                  </div>
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>

      {/* A/B Testing Results */}
      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <div className="bg-white rounded-lg shadow">
          <div className="px-6 py-4 border-b bg-yellow-50">
            <div className="flex justify-between items-center">
              <h2 className="text-lg font-semibold text-yellow-800">
                üß™ A/B„ÉÜ„Çπ„ÉàÁµêÊûú
              </h2>
              <button
                onClick={() => setActiveModal('ab-tests')}
                className="text-sm text-yellow-600 hover:text-yellow-800"
              >
                ÂÖ®„Å¶Ë¶ã„Çã ‚Üí
              </button>
            </div>
          </div>
          <div className="p-6 space-y-4">
            {abTests.map((test) => (
              <div
                key={test.id}
                className="border rounded-lg p-4 hover:shadow-md cursor-pointer transition"
                onClick={() => handleMetricClick(`ab-test-${test.id}`)}
              >
                <div className="flex justify-between items-start mb-3">
                  <h4 className="font-medium">{test.name}</h4>
                  <span
                    className={`px-2 py-1 rounded text-xs ${
                      test.status === 'completed'
                        ? 'bg-green-100 text-green-800'
                        : 'bg-blue-100 text-blue-800'
                    }`}
                  >
                    {test.status === 'completed' ? 'ÂÆå‰∫Ü' : 'ÂÆüË°å‰∏≠'}
                  </span>
                </div>
                <div className="grid grid-cols-2 gap-4 mb-3">
                  <div className="bg-gray-50 p-3 rounded">
                    <p className="text-xs text-gray-600 mb-1">
                      „Éê„É™„Ç¢„É≥„ÉàA: {test.variantA.name}
                    </p>
                    <p className="font-bold text-blue-600">
                      {test.variantA.conversion}%
                    </p>
                    <p className="text-xs text-gray-500">
                      {test.variantA.visitors} visitors
                    </p>
                  </div>
                  <div className="bg-gray-50 p-3 rounded">
                    <p className="text-xs text-gray-600 mb-1">
                      „Éê„É™„Ç¢„É≥„ÉàB: {test.variantB.name}
                    </p>
                    <p className="font-bold text-purple-600">
                      {test.variantB.conversion}%
                    </p>
                    <p className="text-xs text-gray-500">
                      {test.variantB.visitors} visitors
                    </p>
                  </div>
                </div>
                <div className="flex justify-between text-sm">
                  <span>
                    ÂãùËÄÖ:{' '}
                    <span className="font-bold">
                      {test.winner === 'A'
                        ? '„Éê„É™„Ç¢„É≥„ÉàA'
                        : test.winner === 'B'
                          ? '„Éê„É™„Ç¢„É≥„ÉàB'
                          : 'ÁµêË´ñ„Å™„Åó'}
                    </span>
                  </span>
                  <span>
                    ‰ø°È†ºÂ∫¶:{' '}
                    <span className="font-bold text-green-600">
                      {test.confidenceLevel}%
                    </span>
                  </span>
                </div>
              </div>
            ))}
          </div>
        </div>

        {/* Customer Journey Tracking */}
        <div className="bg-white rounded-lg shadow">
          <div className="px-6 py-4 border-b bg-teal-50">
            <div className="flex justify-between items-center">
              <h2 className="text-lg font-semibold text-teal-800">
                üõ§Ô∏è „Ç´„Çπ„Çø„Éû„Éº„Ç∏„É£„Éº„Éã„Éº
              </h2>
              <button
                onClick={() => setActiveModal('customer-journey')}
                className="text-sm text-teal-600 hover:text-teal-800"
              >
                Ë©≥Á¥∞ÂàÜÊûê ‚Üí
              </button>
            </div>
          </div>
          <div className="p-6">
            <div className="space-y-4">
              {customerJourney.map((stage, idx) => (
                <div
                  key={idx}
                  className="cursor-pointer hover:bg-gray-50 p-3 rounded transition"
                  onClick={() => handleMetricClick(`journey-${idx}`)}
                >
                  <div className="flex justify-between items-start mb-2">
                    <h4 className="font-medium">{stage.stage}</h4>
                    <span className="text-sm font-bold text-blue-600">
                      {stage.count.toLocaleString()}
                    </span>
                  </div>
                  <div className="grid grid-cols-3 gap-2 text-xs mb-2">
                    <div>
                      <span className="text-gray-600">CVÁéá:</span>
                      <span className="font-bold text-green-600 ml-1">
                        {stage.conversionRate}%
                      </span>
                    </div>
                    <div>
                      <span className="text-gray-600">Âπ≥ÂùáÊªûÂú®:</span>
                      <span className="font-bold ml-1">
                        {stage.avgTimeInStage}
                      </span>
                    </div>
                    <div>
                      <span className="text-gray-600">Èõ¢ËÑ±Áéá:</span>
                      <span className="font-bold text-red-600 ml-1">
                        {stage.dropOffRate}%
                      </span>
                    </div>
                  </div>
                  {/* Conversion funnel visualization */}
                  <div className="bg-gray-200 rounded-full h-2">
                    <div
                      className="bg-teal-500 h-2 rounded-full transition-all duration-300"
                      style={{ width: `${stage.conversionRate}%` }}
                    />
                  </div>
                </div>
              ))}
            </div>
          </div>
        </div>
      </div>

      {/* Campaign Creation/Edit Modal */}
      {showCampaignForm && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
          <div className="bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto">
            <div className="flex justify-between items-center mb-4">
              <h3 className="text-lg font-semibold">
                {editingCampaign ? '„Ç≠„É£„É≥„Éö„Éº„É≥Á∑®ÈõÜ' : 'Êñ∞Ë¶è„Ç≠„É£„É≥„Éö„Éº„É≥‰ΩúÊàê'}
              </h3>
              <button
                onClick={() => setShowCampaignForm(false)}
                className="text-gray-500 hover:text-gray-700"
              >
                ‚úï
              </button>
            </div>
            <form className="space-y-4">
              <div>
                <label className="block text-sm font-medium mb-1">
                  „Ç≠„É£„É≥„Éö„Éº„É≥Âêç
                </label>
                <input
                  type="text"
                  defaultValue={editingCampaign?.name || ''}
                  className="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
              </div>
              <div className="grid grid-cols-2 gap-4">
                <div>
                  <label className="block text-sm font-medium mb-1">
                    „Çø„Ç§„Éó
                  </label>
                  <select
                    defaultValue={editingCampaign?.type || 'ppc'}
                    className="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                  >
                    <option value="web">WebÂ∫ÉÂëä</option>
                    <option value="seo">SEO</option>
                    <option value="ppc">PPCÂ∫ÉÂëä</option>
                    <option value="social">SNSÂ∫ÉÂëä</option>
                    <option value="email">„É°„Éº„É´„Éû„Éº„Ç±„ÉÜ„Ç£„É≥„Ç∞</option>
                  </select>
                </div>
                <div>
                  <label className="block text-sm font-medium mb-1">
                    „Çπ„ÉÜ„Éº„Çø„Çπ
                  </label>
                  <select
                    defaultValue={editingCampaign?.status || 'draft'}
                    className="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                  >
                    <option value="draft">‰∏ãÊõ∏„Åç</option>
                    <option value="scheduled">‰∫àÂÆö</option>
                    <option value="active">ÂÆüÊñΩ‰∏≠</option>
                    <option value="paused">‰∏ÄÊôÇÂÅúÊ≠¢</option>
                    <option value="completed">ÂÆå‰∫Ü</option>
                  </select>
                </div>
              </div>
              <div className="grid grid-cols-2 gap-4">
                <div>
                  <label className="block text-sm font-medium mb-1">
                    ÈñãÂßãÊó•
                  </label>
                  <input
                    type="date"
                    defaultValue={editingCampaign?.startDate || ''}
                    className="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                  />
                </div>
                <div>
                  <label className="block text-sm font-medium mb-1">
                    ÁµÇ‰∫ÜÊó•
                  </label>
                  <input
                    type="date"
                    defaultValue={editingCampaign?.endDate || ''}
                    className="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                  />
                </div>
              </div>
              <div>
                <label className="block text-sm font-medium mb-1">
                  ‰∫àÁÆó (¬•)
                </label>
                <input
                  type="number"
                  defaultValue={editingCampaign?.budget || ''}
                  className="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
              </div>
              <div className="flex justify-end space-x-3 pt-4">
                <button
                  type="button"
                  onClick={() => setShowCampaignForm(false)}
                  className="px-4 py-2 text-gray-600 border border-gray-300 rounded hover:bg-gray-50"
                >
                  „Ç≠„É£„É≥„Çª„É´
                </button>
                <button
                  type="submit"
                  className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
                >
                  {editingCampaign ? 'Êõ¥Êñ∞' : '‰ΩúÊàê'}
                </button>
              </div>
            </form>
          </div>
        </div>
      )}

      {/* Metric Detail Modals */}
      {activeModal && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
          <div className="bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto">
            <div className="flex justify-between items-center mb-4">
              <h3 className="text-lg font-semibold">
                {activeModal === 'visitors'
                  ? 'Ë®™ÂïèËÄÖË©≥Á¥∞ÂàÜÊûê'
                  : activeModal === 'pageviews'
                    ? '„Éö„Éº„Ç∏„Éì„É•„ÉºË©≥Á¥∞'
                    : activeModal === 'bounce'
                      ? 'Áõ¥Â∏∞ÁéáÂàÜÊûê'
                      : activeModal === 'conversion'
                        ? '„Ç≥„É≥„Éê„Éº„Ç∏„Éß„É≥Ë©≥Á¥∞'
                        : activeModal === 'email-templates'
                          ? '„É°„Éº„É´„ÉÜ„É≥„Éó„É¨„Éº„ÉàÁÆ°ÁêÜ'
                          : activeModal === 'social-scheduler'
                            ? 'SNSÊäïÁ®ø„Çπ„Ç±„Ç∏„É•„Éº„É©„Éº'
                            : activeModal === 'lead-capture-builder'
                              ? '„É™„Éº„ÉâÁç≤Âæó„Éï„Ç©„Éº„É†‰ΩúÊàê'
                              : activeModal === 'analytics'
                                ? 'Ë©≥Á¥∞„Ç¢„Éä„É™„ÉÜ„Ç£„ÇØ„Çπ'
                                : '„Éá„Éº„ÇøË©≥Á¥∞'}
              </h3>
              <button
                onClick={() => setActiveModal(null)}
                className="text-gray-500 hover:text-gray-700"
              >
                ‚úï
              </button>
            </div>
            <div className="text-center py-8 text-gray-500">
              <p>{activeModal}„ÅÆË©≥Á¥∞„Éá„Éº„Çø„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô„ÄÇ</p>
              <p className="text-sm mt-2">
                ÂÆüÈöõ„ÅÆÂÆüË£Ö„Åß„ÅØ„ÄÅ„Ç∞„É©„Éï„ÇÑ„ÉÜ„Éº„Éñ„É´„Å™„Å©„ÅÆË©≥Á¥∞„Å™ÂàÜÊûê„Éá„Éº„Çø„ÅåË°®Á§∫„Åï„Çå„Åæ„Åô„ÄÇ
              </p>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}
